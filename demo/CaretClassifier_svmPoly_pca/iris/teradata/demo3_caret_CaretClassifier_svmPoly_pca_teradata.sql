-- This SQL code was generated by sklearn2sql (development version).
-- Copyright 2018

-- Model : CaretClassifier_svmPoly_pca
-- Dataset : iris
-- Database : teradata


-- This SQL code can contain one or more statements, to be executed in the order they appear in this file.



-- Model deployment code

WITH "ADS_sca_1_OUT" AS 
(SELECT "ADS"."KEY" AS "KEY", (CAST("ADS"."Feature_0" AS DOUBLE PRECISION) - CAST(5.8475 AS DOUBLE PRECISION)) / CAST(0.83050683118121 AS DOUBLE PRECISION) AS "Feature_0", (CAST("ADS"."Feature_1" AS DOUBLE PRECISION) - CAST(3.040833333333333 AS DOUBLE PRECISION)) / CAST(0.441063617685633 AS DOUBLE PRECISION) AS "Feature_1", (CAST("ADS"."Feature_2" AS DOUBLE PRECISION) - CAST(3.844166666666666 AS DOUBLE PRECISION)) / CAST(1.718157887567567 AS DOUBLE PRECISION) AS "Feature_2", (CAST("ADS"."Feature_3" AS DOUBLE PRECISION) - CAST(1.245833333333333 AS DOUBLE PRECISION)) / CAST(0.75179290834033 AS DOUBLE PRECISION) AS "Feature_3" 
FROM iris AS "ADS"), 
"ADS_pre_1_OUT" AS 
(SELECT "ADS_sca_1_OUT"."KEY" AS "KEY", "ADS_sca_1_OUT"."Feature_0" * CAST(-0.526301451438797 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_1" * CAST(0.249543074005026 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_2" * CAST(-0.582256265414231 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_3" * CAST(-0.567197212453844 AS DOUBLE PRECISION) AS "PC1", "ADS_sca_1_OUT"."Feature_0" * CAST(0.357978551872095 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_1" * CAST(0.931208839467465 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_2" * CAST(0.009350349831008 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_3" * CAST(0.067926612275687 AS DOUBLE PRECISION) AS "PC2", "ADS_sca_1_OUT"."Feature_0" * CAST(0.726838701881798 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_1" * CAST(-0.231985866568292 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_2" * CAST(-0.142090941958786 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_3" * CAST(-0.630633192412678 AS DOUBLE PRECISION) AS "PC3", "ADS_sca_1_OUT"."Feature_0" * CAST(-0.257999302440444 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_1" * CAST(0.129463930213543 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_2" * CAST(0.800437615656071 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_3" * CAST(-0.525333298161016 AS DOUBLE PRECISION) AS "PC4" 
FROM "ADS_sca_1_OUT"), 
kernel_input_with_scaling AS 
(SELECT "ADS_pre_1_OUT"."KEY" AS "KEY", (CAST("ADS_pre_1_OUT"."PC1" AS DOUBLE PRECISION) - 5.782411586589357e-20) / 1.7024643738506824 AS "PC1", (CAST("ADS_pre_1_OUT"."PC2" AS DOUBLE PRECISION) - -4.1251724258728475e-16) / 0.9673313864403812 AS "PC2", (CAST("ADS_pre_1_OUT"."PC3" AS DOUBLE PRECISION) - -9.830099697201907e-19) / 0.3786830074967196 AS "PC3", (CAST("ADS_pre_1_OUT"."PC4" AS DOUBLE PRECISION) - -2.532696274926138e-17) / 0.1499474054786266 AS "PC4" 
FROM "ADS_pre_1_OUT"), 
dummy_cte AS 
(SELECT CAST(0.0 AS DOUBLE PRECISION) AS "X"), 
"SV_data_0" AS 
(SELECT "Values".sv_idx AS sv_idx, "Values".dual_coeff AS dual_coeff, "Values".sv_0 AS sv_0, "Values".sv_1 AS sv_1, "Values".sv_2 AS sv_2, "Values".sv_3 AS sv_3 
FROM (SELECT 0 AS sv_idx, CAST(0.036982393322418 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.229047784322261 AS DOUBLE PRECISION) AS sv_0, CAST(-0.407190139568599 AS DOUBLE PRECISION) AS sv_1, CAST(0.764037713638731 AS DOUBLE PRECISION) AS sv_2, CAST(-0.762821332898633 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 1 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.31975655425868 AS DOUBLE PRECISION) AS sv_0, CAST(-0.447933355630245 AS DOUBLE PRECISION) AS sv_1, CAST(0.303715499171448 AS DOUBLE PRECISION) AS sv_2, CAST(0.187317574463296 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 2 AS sv_idx, CAST(-0.622580468350456 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.35973830108814 AS DOUBLE PRECISION) AS sv_0, CAST(0.208529013752129 AS DOUBLE PRECISION) AS sv_1, CAST(-0.178483658459649 AS DOUBLE PRECISION) AS sv_2, CAST(1.70664291646024 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 3 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.121699882305653 AS DOUBLE PRECISION) AS sv_0, CAST(0.150844849073354 AS DOUBLE PRECISION) AS sv_1, CAST(0.03287412337975 AS DOUBLE PRECISION) AS sv_2, CAST(-1.130049254414846 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 4 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.331172080305808 AS DOUBLE PRECISION) AS sv_0, CAST(-1.531864621257153 AS DOUBLE PRECISION) AS sv_1, CAST(-0.468963827628106 AS DOUBLE PRECISION) AS sv_2, CAST(-1.453196888738188 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 5 AS sv_idx, CAST(0.078043629532523 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.476626263342069 AS DOUBLE PRECISION) AS sv_0, CAST(0.526531135353509 AS DOUBLE PRECISION) AS sv_1, CAST(1.425145895298013 AS DOUBLE PRECISION) AS sv_2, CAST(-0.641867176896825 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 6 AS sv_idx, CAST(0.893600478799873 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.009184894451922 AS DOUBLE PRECISION) AS sv_0, CAST(-0.157126246163056 AS DOUBLE PRECISION) AS sv_1, CAST(-0.260354169231508 AS DOUBLE PRECISION) AS sv_2, CAST(1.544773054036458 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 7 AS sv_idx, CAST(-0.246719649606179 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.441994726228102 AS DOUBLE PRECISION) AS sv_0, CAST(-1.063812200404635 AS DOUBLE PRECISION) AS sv_1, CAST(-0.299258991481319 AS DOUBLE PRECISION) AS sv_2, CAST(0.003132142395199 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 8 AS sv_idx, CAST(0.242925646945096 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.224902790646945 AS DOUBLE PRECISION) AS sv_0, CAST(0.888633959125362 AS DOUBLE PRECISION) AS sv_1, CAST(-1.074176468067929 AS DOUBLE PRECISION) AS sv_2, CAST(0.77427709014902 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 9 AS sv_idx, CAST(-0.448253127378443 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.180964848290088 AS DOUBLE PRECISION) AS sv_0, CAST(-2.320024268056499 AS DOUBLE PRECISION) AS sv_1, CAST(0.565540972945853 AS DOUBLE PRECISION) AS sv_2, CAST(-2.155262249053796 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 10 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.085854050844183 AS DOUBLE PRECISION) AS sv_0, CAST(-1.05277800762456 AS DOUBLE PRECISION) AS sv_1, CAST(0.89112388594558 AS DOUBLE PRECISION) AS sv_2, CAST(-0.481034788665721 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 11 AS sv_idx, CAST(0.066001096735168 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.395945234135421 AS DOUBLE PRECISION) AS sv_0, CAST(0.621014397254598 AS DOUBLE PRECISION) AS sv_1, CAST(0.349567577991865 AS DOUBLE PRECISION) AS sv_2, CAST(0.020085504375629 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte) AS "Values"), 
kernel_dp_0 AS 
(SELECT t."KEY" AS "KEY", t.dot_product AS dot_product 
FROM (SELECT full_join_data_sv."KEY" AS "KEY", sum(CAST(full_join_data_sv.dot_prod1 AS DOUBLE PRECISION)) + CAST(0.766486520398831 AS DOUBLE PRECISION) AS dot_product 
FROM (SELECT kernel_input_with_scaling."KEY" AS "KEY", "SV_data_0".dual_coeff * power(CAST(0.1 AS DOUBLE PRECISION) * (kernel_input_with_scaling."PC1" * "SV_data_0".sv_0 + kernel_input_with_scaling."PC2" * "SV_data_0".sv_1 + kernel_input_with_scaling."PC3" * "SV_data_0".sv_2 + kernel_input_with_scaling."PC4" * "SV_data_0".sv_3) + CAST(1.0 AS DOUBLE PRECISION), 3.0) AS dot_prod1 
FROM kernel_input_with_scaling, "SV_data_0") AS full_join_data_sv GROUP BY full_join_data_sv."KEY") AS t), 
"OVR_Score_0" AS 
(SELECT kernel_dp_0."KEY" AS "KEY_0", CAST(NULL AS DOUBLE PRECISION) AS "Proba_0", kernel_dp_0.dot_product AS "Score_0" 
FROM kernel_dp_0), 
"SV_data_1" AS 
(SELECT "Values".sv_idx AS sv_idx, "Values".dual_coeff AS dual_coeff, "Values".sv_0 AS sv_0, "Values".sv_1 AS sv_1, "Values".sv_2 AS sv_2, "Values".sv_3 AS sv_3 
FROM (SELECT 0 AS sv_idx, CAST(-0.418228974964532 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.31975655425868 AS DOUBLE PRECISION) AS sv_0, CAST(-0.447933355630245 AS DOUBLE PRECISION) AS sv_1, CAST(0.303715499171448 AS DOUBLE PRECISION) AS sv_2, CAST(0.187317574463296 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 1 AS sv_idx, CAST(-0.386887026762528 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.35973830108814 AS DOUBLE PRECISION) AS sv_0, CAST(0.208529013752129 AS DOUBLE PRECISION) AS sv_1, CAST(-0.178483658459649 AS DOUBLE PRECISION) AS sv_2, CAST(1.70664291646024 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 2 AS sv_idx, CAST(-0.921294773710744 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.121699882305653 AS DOUBLE PRECISION) AS sv_0, CAST(0.150844849073354 AS DOUBLE PRECISION) AS sv_1, CAST(0.03287412337975 AS DOUBLE PRECISION) AS sv_2, CAST(-1.130049254414846 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 3 AS sv_idx, CAST(0.036783501390579 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.089252589986258 AS DOUBLE PRECISION) AS sv_0, CAST(0.703651664263382 AS DOUBLE PRECISION) AS sv_1, CAST(-0.259138322985655 AS DOUBLE PRECISION) AS sv_2, CAST(-3.075509578911965 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 4 AS sv_idx, CAST(0.536857751943366 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.737454968208508 AS DOUBLE PRECISION) AS sv_0, CAST(-0.484564324147251 AS DOUBLE PRECISION) AS sv_1, CAST(0.061029610640415 AS DOUBLE PRECISION) AS sv_2, CAST(-0.906788617496274 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 5 AS sv_idx, CAST(0.677038313930345 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.506181723237764 AS DOUBLE PRECISION) AS sv_0, CAST(0.035969749289693 AS DOUBLE PRECISION) AS sv_1, CAST(-1.027145048345616 AS DOUBLE PRECISION) AS sv_2, CAST(-0.008694495512959 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 6 AS sv_idx, CAST(0.492565845587459 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.611086051817818 AS DOUBLE PRECISION) AS sv_0, CAST(-0.293202210578873 AS DOUBLE PRECISION) AS sv_1, CAST(0.543002275606142 AS DOUBLE PRECISION) AS sv_2, CAST(1.308379956431408 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 7 AS sv_idx, CAST(-0.016834637413944 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.292368345961838 AS DOUBLE PRECISION) AS sv_0, CAST(1.233920616755542 AS DOUBLE PRECISION) AS sv_1, CAST(-0.483760112293777 AS DOUBLE PRECISION) AS sv_2, CAST(0.936106232533218 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte) AS "Values"), 
kernel_dp_1 AS 
(SELECT t_1."KEY" AS "KEY", t_1.dot_product AS dot_product 
FROM (SELECT full_join_data_sv_1."KEY" AS "KEY", sum(CAST(full_join_data_sv_1.dot_prod1 AS DOUBLE PRECISION)) + CAST(0.352294275487715 AS DOUBLE PRECISION) AS dot_product 
FROM (SELECT kernel_input_with_scaling."KEY" AS "KEY", "SV_data_1".dual_coeff * power(CAST(0.1 AS DOUBLE PRECISION) * (kernel_input_with_scaling."PC1" * "SV_data_1".sv_0 + kernel_input_with_scaling."PC2" * "SV_data_1".sv_1 + kernel_input_with_scaling."PC3" * "SV_data_1".sv_2 + kernel_input_with_scaling."PC4" * "SV_data_1".sv_3) + CAST(1.0 AS DOUBLE PRECISION), 3.0) AS dot_prod1 
FROM kernel_input_with_scaling, "SV_data_1") AS full_join_data_sv_1 GROUP BY full_join_data_sv_1."KEY") AS t_1), 
"OVR_Score_1" AS 
(SELECT kernel_dp_1."KEY" AS "KEY_1", CAST(NULL AS DOUBLE PRECISION) AS "Proba_1", kernel_dp_1.dot_product AS "Score_1" 
FROM kernel_dp_1), 
"SV_data_2" AS 
(SELECT "Values".sv_idx AS sv_idx, "Values".dual_coeff AS dual_coeff, "Values".sv_0 AS sv_0, "Values".sv_1 AS sv_1, "Values".sv_2 AS sv_2, "Values".sv_3 AS sv_3 
FROM (SELECT 0 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.346750807921267 AS DOUBLE PRECISION) AS sv_0, CAST(-0.211997477022048 AS DOUBLE PRECISION) AS sv_1, CAST(-0.158190069204848 AS DOUBLE PRECISION) AS sv_2, CAST(0.261524404362658 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 1 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.105407023180242 AS DOUBLE PRECISION) AS sv_0, CAST(-1.329320646438313 AS DOUBLE PRECISION) AS sv_1, CAST(-0.205940231428065 AS DOUBLE PRECISION) AS sv_2, CAST(-0.107033368280004 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 2 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.860551000563517 AS DOUBLE PRECISION) AS sv_0, CAST(0.279697519821328 AS DOUBLE PRECISION) AS sv_1, CAST(-0.401978885035246 AS DOUBLE PRECISION) AS sv_2, CAST(-0.733837732812117 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 3 AS sv_idx, CAST(0.062911506367547 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.635465850891892 AS DOUBLE PRECISION) AS sv_0, CAST(-0.696895311105444 AS DOUBLE PRECISION) AS sv_1, CAST(-1.359713424717213 AS DOUBLE PRECISION) AS sv_2, CAST(0.284448756222648 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 4 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.563310389639068 AS DOUBLE PRECISION) AS sv_0, CAST(0.081091652350184 AS DOUBLE PRECISION) AS sv_1, CAST(-0.817873635773122 AS DOUBLE PRECISION) AS sv_2, CAST(0.0948196764115 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 5 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.164625390185012 AS DOUBLE PRECISION) AS sv_0, CAST(-0.171976539178019 AS DOUBLE PRECISION) AS sv_1, CAST(-1.221524981126167 AS DOUBLE PRECISION) AS sv_2, CAST(1.285975610051251 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 6 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.40961603879401 AS DOUBLE PRECISION) AS sv_0, CAST(0.80517887851271 AS DOUBLE PRECISION) AS sv_1, CAST(-0.285629177806748 AS DOUBLE PRECISION) AS sv_2, CAST(0.578377825256743 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 7 AS sv_idx, CAST(0.762575641211542 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.158858401596716 AS DOUBLE PRECISION) AS sv_0, CAST(-1.556501926411469 AS DOUBLE PRECISION) AS sv_1, CAST(-2.587854078680349 AS DOUBLE PRECISION) AS sv_2, CAST(0.825406561453712 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 8 AS sv_idx, CAST(-0.736222549405403 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.171872518941292 AS DOUBLE PRECISION) AS sv_0, CAST(-1.76583705249865 AS DOUBLE PRECISION) AS sv_1, CAST(0.071848400934238 AS DOUBLE PRECISION) AS sv_2, CAST(-0.498539521130786 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 9 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.131962624261631 AS DOUBLE PRECISION) AS sv_0, CAST(-0.73778018414584 AS DOUBLE PRECISION) AS sv_1, CAST(1.066710211479956 AS DOUBLE PRECISION) AS sv_2, CAST(0.669205438552054 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 10 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.048317751781674 AS DOUBLE PRECISION) AS sv_0, CAST(-1.017704355034969 AS DOUBLE PRECISION) AS sv_1, CAST(-1.376735392190268 AS DOUBLE PRECISION) AS sv_2, CAST(0.129294980937329 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 11 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.774180005865096 AS DOUBLE PRECISION) AS sv_0, CAST(0.715651339117709 AS DOUBLE PRECISION) AS sv_1, CAST(-0.657928781035001 AS DOUBLE PRECISION) AS sv_2, CAST(-0.653020284201594 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 12 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.737454968208508 AS DOUBLE PRECISION) AS sv_0, CAST(-0.484564324147251 AS DOUBLE PRECISION) AS sv_1, CAST(0.061029610640415 AS DOUBLE PRECISION) AS sv_2, CAST(-0.906788617496274 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 13 AS sv_idx, CAST(0.329525339812986 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.125260224292361 AS DOUBLE PRECISION) AS sv_0, CAST(1.013948992075927 AS DOUBLE PRECISION) AS sv_1, CAST(1.20632327016201 AS DOUBLE PRECISION) AS sv_2, CAST(1.624981720431305 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 14 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.528675052585947 AS DOUBLE PRECISION) AS sv_0, CAST(-0.006901806714972 AS DOUBLE PRECISION) AS sv_1, CAST(-1.323771406368299 AS DOUBLE PRECISION) AS sv_2, CAST(1.130546149523611 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 15 AS sv_idx, CAST(-0.523079788483837 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.653826378012807 AS DOUBLE PRECISION) AS sv_0, CAST(-1.650686265640156 AS DOUBLE PRECISION) AS sv_1, CAST(1.276290441933294 AS DOUBLE PRECISION) AS sv_2, CAST(-1.52309619524668 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 16 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.810327965009058 AS DOUBLE PRECISION) AS sv_0, CAST(-0.044109810739219 AS DOUBLE PRECISION) AS sv_1, CAST(-0.369630176259721 AS DOUBLE PRECISION) AS sv_2, CAST(1.659538465036306 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 17 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.506181723237764 AS DOUBLE PRECISION) AS sv_0, CAST(0.035969749289693 AS DOUBLE PRECISION) AS sv_1, CAST(-1.027145048345616 AS DOUBLE PRECISION) AS sv_2, CAST(-0.008694495512959 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 18 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.611086051817818 AS DOUBLE PRECISION) AS sv_0, CAST(-0.293202210578873 AS DOUBLE PRECISION) AS sv_1, CAST(0.543002275606142 AS DOUBLE PRECISION) AS sv_2, CAST(1.308379956431408 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 19 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.831636053119027 AS DOUBLE PRECISION) AS sv_0, CAST(0.262704438120063 AS DOUBLE PRECISION) AS sv_1, CAST(-0.024465458208241 AS DOUBLE PRECISION) AS sv_2, CAST(1.13025377258984 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 20 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.979142308664967 AS DOUBLE PRECISION) AS sv_0, CAST(1.035744116321253 AS DOUBLE PRECISION) AS sv_1, CAST(-0.687150035478679 AS DOUBLE PRECISION) AS sv_2, CAST(0.526503256693148 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 21 AS sv_idx, CAST(0.433945583286219 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.635465850891892 AS DOUBLE PRECISION) AS sv_0, CAST(-0.696895311105444 AS DOUBLE PRECISION) AS sv_1, CAST(-1.359713424717213 AS DOUBLE PRECISION) AS sv_2, CAST(0.284448756222648 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 22 AS sv_idx, CAST(0.339063561570672 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.063283277922062 AS DOUBLE PRECISION) AS sv_0, CAST(0.557626570494541 AS DOUBLE PRECISION) AS sv_1, CAST(1.970819011164057 AS DOUBLE PRECISION) AS sv_2, CAST(1.544123551781194 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 23 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.402493060012782 AS DOUBLE PRECISION) AS sv_0, CAST(0.427926839053495 AS DOUBLE PRECISION) AS sv_1, CAST(-1.536043829642959 AS DOUBLE PRECISION) AS sv_2, CAST(0.589986189653623 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 24 AS sv_idx, CAST(-0.933345745823009 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.224902790646945 AS DOUBLE PRECISION) AS sv_0, CAST(0.888633959125362 AS DOUBLE PRECISION) AS sv_1, CAST(-1.074176468067929 AS DOUBLE PRECISION) AS sv_2, CAST(0.77427709014902 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 25 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.580658482282486 AS DOUBLE PRECISION) AS sv_0, CAST(0.537559316641946 AS DOUBLE PRECISION) AS sv_1, CAST(1.138114868253046 AS DOUBLE PRECISION) AS sv_2, CAST(-0.175813760516648 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 26 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.67097329758465 AS DOUBLE PRECISION) AS sv_0, CAST(-0.94910199319729 AS DOUBLE PRECISION) AS sv_1, CAST(1.003362696874691 AS DOUBLE PRECISION) AS sv_2, CAST(0.099743318674723 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 27 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.678907537771799 AS DOUBLE PRECISION) AS sv_0, CAST(-1.736991964413443 AS DOUBLE PRECISION) AS sv_1, CAST(0.704876462250472 AS DOUBLE PRECISION) AS sv_2, CAST(0.444696390586206 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 28 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.379469251131639 AS DOUBLE PRECISION) AS sv_0, CAST(-0.175653408194168 AS DOUBLE PRECISION) AS sv_1, CAST(0.250757424962422 AS DOUBLE PRECISION) AS sv_2, CAST(1.141739976867967 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 29 AS sv_idx, CAST(-0.653437819029464 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.090179055257148 AS DOUBLE PRECISION) AS sv_0, CAST(-0.261095171771088 AS DOUBLE PRECISION) AS sv_1, CAST(-1.683745278996248 AS DOUBLE PRECISION) AS sv_2, CAST(1.700324674682851 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 30 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.762239171231731 AS DOUBLE PRECISION) AS sv_0, CAST(0.339669715896782 AS DOUBLE PRECISION) AS sv_1, CAST(0.768463339431906 AS DOUBLE PRECISION) AS sv_2, CAST(-0.371526116902454 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 31 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.216578395764695 AS DOUBLE PRECISION) AS sv_0, CAST(-0.039986350580284 AS DOUBLE PRECISION) AS sv_1, CAST(-0.462678325233397 AS DOUBLE PRECISION) AS sv_2, CAST(-0.267614099616922 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 32 AS sv_idx, CAST(0.86666946067806 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.396858771808 AS DOUBLE PRECISION) AS sv_0, CAST(0.239937820308846 AS DOUBLE PRECISION) AS sv_1, CAST(1.980767278436828 AS DOUBLE PRECISION) AS sv_2, CAST(0.272296357997804 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 33 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.898615853550229 AS DOUBLE PRECISION) AS sv_0, CAST(-0.428414239798322 AS DOUBLE PRECISION) AS sv_1, CAST(-0.016730003832057 AS DOUBLE PRECISION) AS sv_2, CAST(-0.337221029191641 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 34 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.324070554755559 AS DOUBLE PRECISION) AS sv_0, CAST(-0.412592453217471 AS DOUBLE PRECISION) AS sv_1, CAST(0.832681377058222 AS DOUBLE PRECISION) AS sv_2, CAST(1.878012293123761 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 35 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.868141685035232 AS DOUBLE PRECISION) AS sv_0, CAST(-0.911177722447064 AS DOUBLE PRECISION) AS sv_1, CAST(0.095464688682846 AS DOUBLE PRECISION) AS sv_2, CAST(-1.453618762447393 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 36 AS sv_idx, CAST(-0.948605190185312 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.395945234135421 AS DOUBLE PRECISION) AS sv_0, CAST(0.621014397254598 AS DOUBLE PRECISION) AS sv_1, CAST(0.349567577991865 AS DOUBLE PRECISION) AS sv_2, CAST(0.020085504375629 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 37 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.694915815085094 AS DOUBLE PRECISION) AS sv_0, CAST(0.627803122762929 AS DOUBLE PRECISION) AS sv_1, CAST(1.556657693398034 AS DOUBLE PRECISION) AS sv_2, CAST(0.031214583332266 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte) AS "Values"), 
kernel_dp_2 AS 
(SELECT t_2."KEY" AS "KEY", t_2.dot_product AS dot_product 
FROM (SELECT full_join_data_sv_2."KEY" AS "KEY", sum(CAST(full_join_data_sv_2.dot_prod1 AS DOUBLE PRECISION)) + CAST(-1.54088002264008 AS DOUBLE PRECISION) AS dot_product 
FROM (SELECT kernel_input_with_scaling."KEY" AS "KEY", "SV_data_2".dual_coeff * power(CAST(0.1 AS DOUBLE PRECISION) * (kernel_input_with_scaling."PC1" * "SV_data_2".sv_0 + kernel_input_with_scaling."PC2" * "SV_data_2".sv_1 + kernel_input_with_scaling."PC3" * "SV_data_2".sv_2 + kernel_input_with_scaling."PC4" * "SV_data_2".sv_3) + CAST(1.0 AS DOUBLE PRECISION), 3.0) AS dot_prod1 
FROM kernel_input_with_scaling, "SV_data_2") AS full_join_data_sv_2 GROUP BY full_join_data_sv_2."KEY") AS t_2), 
"OVR_Score_2" AS 
(SELECT kernel_dp_2."KEY" AS "KEY_2", CAST(NULL AS DOUBLE PRECISION) AS "Proba_2", kernel_dp_2.dot_product AS "Score_2" 
FROM kernel_dp_2), 
"OVR_Join_CTE" AS 
(SELECT "OVR_Score_0"."KEY_0" AS "KEY_0", "OVR_Score_0"."Proba_0" AS "Proba_0", "OVR_Score_0"."Score_0" AS "Score_0", "OVR_Score_1"."KEY_1" AS "KEY_1", "OVR_Score_1"."Proba_1" AS "Proba_1", "OVR_Score_1"."Score_1" AS "Score_1", "OVR_Score_2"."KEY_2" AS "KEY_2", "OVR_Score_2"."Proba_2" AS "Proba_2", "OVR_Score_2"."Score_2" AS "Score_2" 
FROM "OVR_Score_0" LEFT OUTER JOIN "OVR_Score_1" ON "OVR_Score_0"."KEY_0" = "OVR_Score_1"."KEY_1" LEFT OUTER JOIN "OVR_Score_2" ON "OVR_Score_2"."KEY_2" = "OVR_Score_1"."KEY_1"), 
orig_cte AS 
(SELECT "OVR_Join_CTE"."KEY_0" AS "KEY", "OVR_Join_CTE"."Score_0" AS "Score_0", "OVR_Join_CTE"."Score_1" AS "Score_1", "OVR_Join_CTE"."Score_2" AS "Score_2", "OVR_Join_CTE"."Proba_0" / ("OVR_Join_CTE"."Proba_0" + "OVR_Join_CTE"."Proba_1" + "OVR_Join_CTE"."Proba_2") AS "Proba_0", "OVR_Join_CTE"."Proba_1" / ("OVR_Join_CTE"."Proba_0" + "OVR_Join_CTE"."Proba_1" + "OVR_Join_CTE"."Proba_2") AS "Proba_1", "OVR_Join_CTE"."Proba_2" / ("OVR_Join_CTE"."Proba_0" + "OVR_Join_CTE"."Proba_1" + "OVR_Join_CTE"."Proba_2") AS "Proba_2", CAST(NULL AS DOUBLE PRECISION) AS "LogProba_0", CAST(NULL AS DOUBLE PRECISION) AS "LogProba_1", CAST(NULL AS DOUBLE PRECISION) AS "LogProba_2", CAST(NULL AS BIGINT) AS "Decision", CAST(NULL AS DOUBLE PRECISION) AS "DecisionProba" 
FROM "OVR_Join_CTE"), 
score_class_union AS 
(SELECT scu."KEY_u" AS "KEY_u", scu."class" AS "class", scu."LogProba" AS "LogProba", scu."Proba" AS "Proba", scu."Score" AS "Score" 
FROM (SELECT orig_cte."KEY" AS "KEY_u", 0 AS "class", orig_cte."LogProba_0" AS "LogProba", orig_cte."Proba_0" AS "Proba", orig_cte."Score_0" AS "Score" 
FROM orig_cte UNION ALL SELECT orig_cte."KEY" AS "KEY_u", 1 AS "class", orig_cte."LogProba_1" AS "LogProba", orig_cte."Proba_1" AS "Proba", orig_cte."Score_1" AS "Score" 
FROM orig_cte UNION ALL SELECT orig_cte."KEY" AS "KEY_u", 2 AS "class", orig_cte."LogProba_2" AS "LogProba", orig_cte."Proba_2" AS "Proba", orig_cte."Score_2" AS "Score" 
FROM orig_cte) AS scu), 
score_max AS 
(SELECT orig_cte."KEY" AS "KEY", orig_cte."Score_0" AS "Score_0", orig_cte."Score_1" AS "Score_1", orig_cte."Score_2" AS "Score_2", orig_cte."Proba_0" AS "Proba_0", orig_cte."Proba_1" AS "Proba_1", orig_cte."Proba_2" AS "Proba_2", orig_cte."LogProba_0" AS "LogProba_0", orig_cte."LogProba_1" AS "LogProba_1", orig_cte."LogProba_2" AS "LogProba_2", orig_cte."Decision" AS "Decision", orig_cte."DecisionProba" AS "DecisionProba", max_select."KEY_m" AS "KEY_m", max_select."max_Score" AS "max_Score" 
FROM orig_cte LEFT OUTER JOIN (SELECT score_class_union."KEY_u" AS "KEY_m", max(score_class_union."Score") AS "max_Score" 
FROM score_class_union GROUP BY score_class_union."KEY_u") AS max_select ON orig_cte."KEY" = max_select."KEY_m"), 
union_with_max AS 
(SELECT score_class_union."KEY_u" AS "KEY_u", score_class_union."class" AS "class", score_class_union."LogProba" AS "LogProba", score_class_union."Proba" AS "Proba", score_class_union."Score" AS "Score", score_max."KEY" AS "KEY", score_max."Score_0" AS "Score_0", score_max."Score_1" AS "Score_1", score_max."Score_2" AS "Score_2", score_max."Proba_0" AS "Proba_0", score_max."Proba_1" AS "Proba_1", score_max."Proba_2" AS "Proba_2", score_max."LogProba_0" AS "LogProba_0", score_max."LogProba_1" AS "LogProba_1", score_max."LogProba_2" AS "LogProba_2", score_max."Decision" AS "Decision", score_max."DecisionProba" AS "DecisionProba", score_max."KEY_m" AS "KEY_m", score_max."max_Score" AS "max_Score" 
FROM score_class_union LEFT OUTER JOIN score_max ON score_class_union."KEY_u" = score_max."KEY"), 
arg_max_cte AS 
(SELECT score_max."KEY" AS "KEY", score_max."Score_0" AS "Score_0", score_max."Score_1" AS "Score_1", score_max."Score_2" AS "Score_2", score_max."Proba_0" AS "Proba_0", score_max."Proba_1" AS "Proba_1", score_max."Proba_2" AS "Proba_2", score_max."LogProba_0" AS "LogProba_0", score_max."LogProba_1" AS "LogProba_1", score_max."LogProba_2" AS "LogProba_2", score_max."Decision" AS "Decision", score_max."DecisionProba" AS "DecisionProba", score_max."KEY_m" AS "KEY_m", score_max."max_Score" AS "max_Score", "arg_max_t_Score"."KEY_Score" AS "KEY_Score", "arg_max_t_Score"."arg_max_Score" AS "arg_max_Score" 
FROM score_max LEFT OUTER JOIN (SELECT union_with_max."KEY" AS "KEY_Score", max(union_with_max."class") AS "arg_max_Score" 
FROM union_with_max 
WHERE union_with_max."max_Score" <= union_with_max."Score" GROUP BY union_with_max."KEY") AS "arg_max_t_Score" ON score_max."KEY" = "arg_max_t_Score"."KEY_Score")
 SELECT arg_max_cte."KEY" AS "KEY", arg_max_cte."Score_0" AS "Score_0", arg_max_cte."Score_1" AS "Score_1", arg_max_cte."Score_2" AS "Score_2", arg_max_cte."Proba_0" AS "Proba_0", arg_max_cte."Proba_1" AS "Proba_1", arg_max_cte."Proba_2" AS "Proba_2", CASE WHEN (arg_max_cte."Proba_0" IS NULL OR arg_max_cte."Proba_0" > CAST(0.0 AS DOUBLE PRECISION)) THEN ln(arg_max_cte."Proba_0") ELSE -1.79769313486231e+308 END AS "LogProba_0", CASE WHEN (arg_max_cte."Proba_1" IS NULL OR arg_max_cte."Proba_1" > CAST(0.0 AS DOUBLE PRECISION)) THEN ln(arg_max_cte."Proba_1") ELSE -1.79769313486231e+308 END AS "LogProba_1", CASE WHEN (arg_max_cte."Proba_2" IS NULL OR arg_max_cte."Proba_2" > CAST(0.0 AS DOUBLE PRECISION)) THEN ln(arg_max_cte."Proba_2") ELSE -1.79769313486231e+308 END AS "LogProba_2", arg_max_cte."arg_max_Score" AS "Decision", CASE WHEN (arg_max_cte."arg_max_Score" = 0) THEN arg_max_cte."Proba_0" WHEN (arg_max_cte."arg_max_Score" = 1) THEN arg_max_cte."Proba_1" WHEN (arg_max_cte."arg_max_Score" = 2) THEN arg_max_cte."Proba_2" END AS "DecisionProba" 
FROM arg_max_cte