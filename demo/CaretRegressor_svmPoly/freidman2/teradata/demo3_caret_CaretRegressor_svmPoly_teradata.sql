-- This SQL code was generated by sklearn2sql (development version).
-- Copyright 2018

-- Model : CaretRegressor_svmPoly
-- Dataset : freidman2
-- Database : teradata


-- This SQL code can contain one or more statements, to be executed in the order they appear in this file.



-- Model deployment code

WITH kernel_input_with_scaling AS 
(SELECT "ADS"."KEY" AS "KEY", (CAST("ADS"."Feature_0" AS DOUBLE PRECISION) - 43.791281222074) / 26.1998878150635 AS "Feature_0", (CAST("ADS"."Feature_1" AS DOUBLE PRECISION) - 945.96728330844) / 464.3666952541536 AS "Feature_1", (CAST("ADS"."Feature_2" AS DOUBLE PRECISION) - 0.5310009099975209) / 0.2920171749459157 AS "Feature_2", (CAST("ADS"."Feature_3" AS DOUBLE PRECISION) - 6.139967152050498) / 3.0923049253819994 AS "Feature_3" 
FROM freidman2 AS "ADS"), 
dummy_cte AS 
(SELECT CAST(0.0 AS DOUBLE PRECISION) AS "X"), 
"SV_data" AS 
(SELECT "Values".sv_idx AS sv_idx, "Values".dual_coeff AS dual_coeff, "Values".sv_0 AS sv_0, "Values".sv_1 AS sv_1, "Values".sv_2 AS sv_2, "Values".sv_3 AS sv_3 
FROM (SELECT 0 AS sv_idx, CAST(-0.167767299855696 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.176171406971921 AS DOUBLE PRECISION) AS sv_0, CAST(1.475236878623988 AS DOUBLE PRECISION) AS sv_1, CAST(-1.383246211733134 AS DOUBLE PRECISION) AS sv_2, CAST(-0.607336022941416 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 1 AS sv_idx, CAST(0.034283040557443 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.041766113433662 AS DOUBLE PRECISION) AS sv_0, CAST(1.467405673578364 AS DOUBLE PRECISION) AS sv_1, CAST(1.008778447335575 AS DOUBLE PRECISION) AS sv_2, CAST(1.268788761557724 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 2 AS sv_idx, CAST(0.405454840841649 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.040434821565861 AS DOUBLE PRECISION) AS sv_0, CAST(0.333166471704926 AS DOUBLE PRECISION) AS sv_1, CAST(1.516378433743919 AS DOUBLE PRECISION) AS sv_2, CAST(-1.07797920063908 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 3 AS sv_idx, CAST(0.03727761117633 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.729796694085564 AS DOUBLE PRECISION) AS sv_0, CAST(-1.054625713071719 AS DOUBLE PRECISION) AS sv_1, CAST(-1.632421380038048 AS DOUBLE PRECISION) AS sv_2, CAST(1.275849111161276 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 4 AS sv_idx, CAST(-0.247027761471843 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.134073630731939 AS DOUBLE PRECISION) AS sv_0, CAST(-1.248476698654769 AS DOUBLE PRECISION) AS sv_1, CAST(1.594715839047914 AS DOUBLE PRECISION) AS sv_2, CAST(-1.449721268940829 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 5 AS sv_idx, CAST(-0.091214986712109 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.666912489785625 AS DOUBLE PRECISION) AS sv_0, CAST(-0.831395841395554 AS DOUBLE PRECISION) AS sv_1, CAST(1.590957452599673 AS DOUBLE PRECISION) AS sv_2, CAST(0.72424156579339 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 6 AS sv_idx, CAST(0.579704610351003 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.295695323221847 AS DOUBLE PRECISION) AS sv_0, CAST(1.498771705006719 AS DOUBLE PRECISION) AS sv_1, CAST(0.60453190692888 AS DOUBLE PRECISION) AS sv_2, CAST(-0.04948077865629 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 7 AS sv_idx, CAST(-0.09066110668412 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.966791160673958 AS DOUBLE PRECISION) AS sv_0, CAST(0.560283003864504 AS DOUBLE PRECISION) AS sv_1, CAST(-0.95871463489856 AS DOUBLE PRECISION) AS sv_2, CAST(-0.352892318699504 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 8 AS sv_idx, CAST(0.252133987207881 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.17431668183365 AS DOUBLE PRECISION) AS sv_0, CAST(1.150101745058788 AS DOUBLE PRECISION) AS sv_1, CAST(1.536384271186821 AS DOUBLE PRECISION) AS sv_2, CAST(1.551694080146041 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 9 AS sv_idx, CAST(-0.156239277904801 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.481776580102251 AS DOUBLE PRECISION) AS sv_0, CAST(-1.271168616237998 AS DOUBLE PRECISION) AS sv_1, CAST(1.063228196770656 AS DOUBLE PRECISION) AS sv_2, CAST(1.196666997079253 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 10 AS sv_idx, CAST(-0.087304431181457 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.086438429098235 AS DOUBLE PRECISION) AS sv_0, CAST(-1.648327194998381 AS DOUBLE PRECISION) AS sv_1, CAST(0.614407865565616 AS DOUBLE PRECISION) AS sv_2, CAST(1.122900377956353 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 11 AS sv_idx, CAST(-0.183607378830417 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.21879454372484 AS DOUBLE PRECISION) AS sv_0, CAST(0.07229586633147 AS DOUBLE PRECISION) AS sv_1, CAST(-0.639830102928969 AS DOUBLE PRECISION) AS sv_2, CAST(0.177858045139248 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 12 AS sv_idx, CAST(-0.521173580316113 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.989437434838039 AS DOUBLE PRECISION) AS sv_0, CAST(1.162819503016845 AS DOUBLE PRECISION) AS sv_1, CAST(-1.634853010933595 AS DOUBLE PRECISION) AS sv_2, CAST(0.065439409457982 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 13 AS sv_idx, CAST(-0.010859000927628 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.344519300712666 AS DOUBLE PRECISION) AS sv_0, CAST(0.476367891619324 AS DOUBLE PRECISION) AS sv_1, CAST(-1.081417129445332 AS DOUBLE PRECISION) AS sv_2, CAST(1.417474793792274 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 14 AS sv_idx, CAST(0.027292948796968 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.201305624800676 AS DOUBLE PRECISION) AS sv_0, CAST(0.801154104427731 AS DOUBLE PRECISION) AS sv_1, CAST(0.754999962315341 AS DOUBLE PRECISION) AS sv_2, CAST(-1.2370886970912 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 15 AS sv_idx, CAST(-0.31483864045838 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.977145951082381 AS DOUBLE PRECISION) AS sv_0, CAST(-1.505543173467996 AS DOUBLE PRECISION) AS sv_1, CAST(1.385179447408544 AS DOUBLE PRECISION) AS sv_2, CAST(-0.161427744848218 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 16 AS sv_idx, CAST(0.534546425411288 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.347708624953559 AS DOUBLE PRECISION) AS sv_0, CAST(0.795308777919337 AS DOUBLE PRECISION) AS sv_1, CAST(1.5593635512025 AS DOUBLE PRECISION) AS sv_2, CAST(-0.073890696278566 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte) AS "Values"), 
kernel_dp AS 
(SELECT t."KEY" AS "KEY", t.dot_product AS dot_product 
FROM (SELECT full_join_data_sv."KEY" AS "KEY", sum(CAST(full_join_data_sv.dot_prod1 AS DOUBLE PRECISION)) + CAST(0.061193857644769 AS DOUBLE PRECISION) AS dot_product 
FROM (SELECT kernel_input_with_scaling."KEY" AS "KEY", "SV_data".dual_coeff * power(CAST(0.1 AS DOUBLE PRECISION) * (kernel_input_with_scaling."Feature_0" * "SV_data".sv_0 + kernel_input_with_scaling."Feature_1" * "SV_data".sv_1 + kernel_input_with_scaling."Feature_2" * "SV_data".sv_2 + kernel_input_with_scaling."Feature_3" * "SV_data".sv_3) + CAST(1.0 AS DOUBLE PRECISION), 3.0) AS dot_prod1 
FROM kernel_input_with_scaling, "SV_data") AS full_join_data_sv GROUP BY full_join_data_sv."KEY") AS t)
 SELECT kernel_dp."KEY" AS "KEY", CAST(499.0928844651739 AS DOUBLE PRECISION) + CAST(374.0338110593958 AS DOUBLE PRECISION) * kernel_dp.dot_product AS "Estimator" 
FROM kernel_dp