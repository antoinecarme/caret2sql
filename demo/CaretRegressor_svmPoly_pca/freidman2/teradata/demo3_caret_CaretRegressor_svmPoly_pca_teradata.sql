-- This SQL code was generated by sklearn2sql (development version).
-- Copyright 2018

-- Model : CaretRegressor_svmPoly_pca
-- Dataset : freidman2
-- Database : teradata


-- This SQL code can contain one or more statements, to be executed in the order they appear in this file.



-- Model deployment code

WITH "ADS_sca_1_OUT" AS 
(SELECT "ADS"."KEY" AS "KEY", (CAST("ADS"."Feature_0" AS DOUBLE PRECISION) - CAST(43.791281222074 AS DOUBLE PRECISION)) / CAST(26.1998878150635 AS DOUBLE PRECISION) AS "Feature_0", (CAST("ADS"."Feature_1" AS DOUBLE PRECISION) - CAST(945.96728330844 AS DOUBLE PRECISION)) / CAST(464.3666952541536 AS DOUBLE PRECISION) AS "Feature_1", (CAST("ADS"."Feature_2" AS DOUBLE PRECISION) - CAST(0.531000909997521 AS DOUBLE PRECISION)) / CAST(0.292017174945916 AS DOUBLE PRECISION) AS "Feature_2", (CAST("ADS"."Feature_3" AS DOUBLE PRECISION) - CAST(6.139967152050498 AS DOUBLE PRECISION)) / CAST(3.092304925382 AS DOUBLE PRECISION) AS "Feature_3" 
FROM freidman2 AS "ADS"), 
"ADS_pre_1_OUT" AS 
(SELECT "ADS_sca_1_OUT"."KEY" AS "KEY", "ADS_sca_1_OUT"."Feature_0" * CAST(-0.61216507491007 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_1" * CAST(0.546478290332943 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_2" * CAST(-0.570867748564476 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_3" * CAST(-0.026933490380143 AS DOUBLE PRECISION) AS "PC1", "ADS_sca_1_OUT"."Feature_0" * CAST(0.488881338042008 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_1" * CAST(0.274519258456139 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_2" * CAST(-0.223844999535911 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_3" * CAST(-0.797199868435587 AS DOUBLE PRECISION) AS "PC2", "ADS_sca_1_OUT"."Feature_0" * CAST(-0.024686176636209 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_1" * CAST(0.709191857651851 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_2" * CAST(0.703881747208946 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_3" * CAST(0.031432271147406 AS DOUBLE PRECISION) AS "PC3", "ADS_sca_1_OUT"."Feature_0" * CAST(-0.620998833378688 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_1" * CAST(-0.350781362064452 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_2" * CAST(0.358544161544677 AS DOUBLE PRECISION) + "ADS_sca_1_OUT"."Feature_3" * CAST(-0.602294752752124 AS DOUBLE PRECISION) AS "PC4" 
FROM "ADS_sca_1_OUT"), 
kernel_input_with_scaling AS 
(SELECT "ADS_pre_1_OUT"."KEY" AS "KEY", (CAST("ADS_pre_1_OUT"."PC1" AS DOUBLE PRECISION) - 7.259817746962938e-17) / 1.0912921970850795 AS "PC1", (CAST("ADS_pre_1_OUT"."PC2" AS DOUBLE PRECISION) - 4.6837533851373785e-17) / 1.0787025043586622 AS "PC2", (CAST("ADS_pre_1_OUT"."PC3" AS DOUBLE PRECISION) - -6.609296443471634e-17) / 0.9655534556992196 AS "PC3", (CAST("ADS_pre_1_OUT"."PC4" AS DOUBLE PRECISION) - -2.203098814490545e-17) / 0.8445050454904731 AS "PC4" 
FROM "ADS_pre_1_OUT"), 
dummy_cte AS 
(SELECT CAST(0.0 AS DOUBLE PRECISION) AS "X"), 
"SV_data" AS 
(SELECT "Values".sv_idx AS sv_idx, "Values".dual_coeff AS dual_coeff, "Values".sv_0 AS sv_0, "Values".sv_1 AS sv_1, "Values".sv_2 AS sv_2, "Values".sv_3 AS sv_3 
FROM (SELECT 0 AS sv_idx, CAST(-0.253383876033811 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.37850089854269 AS DOUBLE PRECISION) AS sv_0, CAST(1.191161406549864 AS DOUBLE PRECISION) AS sv_1, CAST(0.05089855230849 AS DOUBLE PRECISION) AS sv_2, CAST(-0.896439159622483 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 1 AS sv_idx, CAST(0.018559033739197 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.152374952622798 AS DOUBLE PRECISION) AS sv_0, CAST(-0.754645929519459 AS DOUBLE PRECISION) AS sv_1, CAST(1.853426910541869 AS DOUBLE PRECISION) AS sv_2, CAST(-1.116829869146634 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 2 AS sv_idx, CAST(0.278438821869041 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.577111036135452 AS DOUBLE PRECISION) AS sv_0, CAST(0.548458845531396 AS DOUBLE PRECISION) AS sv_1, CAST(1.316079280199782 AS DOUBLE PRECISION) AS sv_2, CAST(1.303948679044128 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 3 AS sv_idx, CAST(0.007962502075542 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.115049348553124 AS DOUBLE PRECISION) AS sv_0, CAST(-0.541788363836155 AS DOUBLE PRECISION) AS sv_1, CAST(-1.941763685449151 AS DOUBLE PRECISION) AS sv_2, CAST(-1.701579213947659 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 4 AS sv_idx, CAST(-0.132015833877291 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.348416133019098 AS DOUBLE PRECISION) AS sv_0, CAST(0.361982514674524 AS DOUBLE PRECISION) AS sv_1, CAST(0.201774012721763 AS DOUBLE PRECISION) AS sv_2, CAST(2.328153635410188 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 5 AS sv_idx, CAST(-0.074224237483558 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.331393207113772 AS DOUBLE PRECISION) AS sv_0, CAST(-1.832432687869641 AS DOUBLE PRECISION) AS sv_1, CAST(0.615337245382805 AS DOUBLE PRECISION) AS sv_2, CAST(1.730019845417768 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 6 AS sv_idx, CAST(0.541509333421541 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.162338142224765 AS DOUBLE PRECISION) AS sv_0, CAST(-0.294682675867176 AS DOUBLE PRECISION) AS sv_1, CAST(1.573052352473792 AS DOUBLE PRECISION) AS sv_2, CAST(0.622183971402443 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 7 AS sv_idx, CAST(-0.023257890980354 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.416638229815836 AS DOUBLE PRECISION) AS sv_0, CAST(2.378813663050534 AS DOUBLE PRECISION) AS sv_1, CAST(-0.902583443484049 AS DOUBLE PRECISION) AS sv_2, CAST(-0.868927903554924 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 8 AS sv_idx, CAST(0.252707589028416 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.16828540326041 AS DOUBLE PRECISION) AS sv_0, CAST(-1.251890435049662 AS DOUBLE PRECISION) AS sv_1, CAST(2.01972465450432 AS DOUBLE PRECISION) AS sv_2, CAST(-0.803902115491066 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 9 AS sv_idx, CAST(-0.233549035520104 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.492529643921448 AS DOUBLE PRECISION) AS sv_0, CAST(-1.210166630146362 AS DOUBLE PRECISION) AS sv_1, CAST(-0.131939636269856 AS DOUBLE PRECISION) AS sv_2, CAST(-0.228314120081808 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 10 AS sv_idx, CAST(-0.042669034980065 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.565095790282765 AS DOUBLE PRECISION) AS sv_0, CAST(-1.869231957828933 AS DOUBLE PRECISION) AS sv_1, CAST(-0.698453741145606 AS DOUBLE PRECISION) AS sv_2, CAST(0.943576130600355 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 11 AS sv_idx, CAST(-0.095377067272588 AS DOUBLE PRECISION) AS dual_coeff, CAST(2.339879525546283 AS DOUBLE PRECISION) AS sv_0, CAST(1.171452181953924 AS DOUBLE PRECISION) AS sv_1, CAST(-0.123022956522745 AS DOUBLE PRECISION) AS sv_2, CAST(0.522460603120985 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 12 AS sv_idx, CAST(-0.473784956338723 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.990921411400796 AS DOUBLE PRECISION) AS sv_0, CAST(0.138392404665929 AS DOUBLE PRECISION) AS sv_1, CAST(-0.310287050385801 AS DOUBLE PRECISION) AS sv_2, CAST(-0.496192099264584 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 13 AS sv_idx, CAST(0.159910847364483 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.076152803032726 AS DOUBLE PRECISION) AS sv_0, CAST(1.052700600607052 AS DOUBLE PRECISION) AS sv_1, CAST(1.093412985472801 AS DOUBLE PRECISION) AS sv_2, CAST(0.722023363305073 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 14 AS sv_idx, CAST(-0.415333133768359 AS DOUBLE PRECISION) AS dual_coeff, CAST(-2.022673441251131 AS DOUBLE PRECISION) AS sv_0, CAST(-0.108433503084949 AS DOUBLE PRECISION) AS sv_1, CAST(-0.126261749468088 AS DOUBLE PRECISION) AS sv_2, CAST(0.610043811288978 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 15 AS sv_idx, CAST(0.484506938756633 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.171639821886214 AS DOUBLE PRECISION) AS sv_0, CAST(0.544215934792696 AS DOUBLE PRECISION) AS sv_1, CAST(1.684051478875226 AS DOUBLE PRECISION) AS sv_2, CAST(-0.60662787900618 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte) AS "Values"), 
kernel_dp AS 
(SELECT t."KEY" AS "KEY", t.dot_product AS dot_product 
FROM (SELECT full_join_data_sv."KEY" AS "KEY", sum(CAST(full_join_data_sv.dot_prod1 AS DOUBLE PRECISION)) + CAST(0.030324537253723 AS DOUBLE PRECISION) AS dot_product 
FROM (SELECT kernel_input_with_scaling."KEY" AS "KEY", "SV_data".dual_coeff * power(CAST(0.1 AS DOUBLE PRECISION) * (kernel_input_with_scaling."PC1" * "SV_data".sv_0 + kernel_input_with_scaling."PC2" * "SV_data".sv_1 + kernel_input_with_scaling."PC3" * "SV_data".sv_2 + kernel_input_with_scaling."PC4" * "SV_data".sv_3) + CAST(1.0 AS DOUBLE PRECISION), 3.0) AS dot_prod1 
FROM kernel_input_with_scaling, "SV_data") AS full_join_data_sv GROUP BY full_join_data_sv."KEY") AS t)
 SELECT kernel_dp."KEY" AS "KEY", CAST(499.0928844651739 AS DOUBLE PRECISION) + CAST(374.0338110593958 AS DOUBLE PRECISION) * kernel_dp.dot_product AS "Estimator" 
FROM kernel_dp