-- This SQL code was generated by sklearn2sql (development version).
-- Copyright 2018

-- Model : CaretClassifier_svmPoly
-- Dataset : iris_str_tgt
-- Database : teradata


-- This SQL code can contain one or more statements, to be executed in the order they appear in this file.



-- Model deployment code

WITH kernel_input_with_scaling AS 
(SELECT "ADS"."KEY" AS "KEY", (CAST("ADS"."Feature_0" AS DOUBLE PRECISION) - 5.8475) / 0.8305068311812105 AS "Feature_0", (CAST("ADS"."Feature_1" AS DOUBLE PRECISION) - 3.040833333333333) / 0.4410636176856331 AS "Feature_1", (CAST("ADS"."Feature_2" AS DOUBLE PRECISION) - 3.8441666666666667) / 1.7181578875675667 AS "Feature_2", (CAST("ADS"."Feature_3" AS DOUBLE PRECISION) - 1.245833333333333) / 0.7517929083403303 AS "Feature_3" 
FROM iris_str_tgt AS "ADS"), 
dummy_cte AS 
(SELECT CAST(0.0 AS DOUBLE PRECISION) AS "X"), 
"SV_data_CLASS_0" AS 
(SELECT "Values".sv_idx AS sv_idx, "Values".dual_coeff AS dual_coeff, "Values".sv_0 AS sv_0, "Values".sv_1 AS sv_1, "Values".sv_2 AS sv_2, "Values".sv_3 AS sv_3 
FROM (SELECT 0 AS sv_idx, CAST(-0.957149330533534 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.900052801416273 AS DOUBLE PRECISION) AS sv_0, CAST(0.587594751130406 AS DOUBLE PRECISION) AS sv_1, CAST(-1.247945070811978 AS DOUBLE PRECISION) AS sv_2, CAST(-0.992072850194672 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 1 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.900052801416273 AS DOUBLE PRECISION) AS sv_0, CAST(-1.226202551394323 AS DOUBLE PRECISION) AS sv_1, CAST(-0.491320776032854 AS DOUBLE PRECISION) AS sv_2, CAST(-0.1939807248984 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 2 AS sv_idx, CAST(0.359641769215815 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.140869604470794 AS DOUBLE PRECISION) AS sv_0, CAST(-1.452927214209914 AS DOUBLE PRECISION) AS sv_1, CAST(-0.316715169545364 AS DOUBLE PRECISION) AS sv_2, CAST(-0.326996079114445 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 3 AS sv_idx, CAST(0.148511744712015 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.183622812329072 AS DOUBLE PRECISION) AS sv_0, CAST(0.814319413945998 AS DOUBLE PRECISION) AS sv_1, CAST(0.381707256404597 AS DOUBLE PRECISION) AS sv_2, CAST(0.471096046181828 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 4 AS sv_idx, CAST(-0.551004183394296 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.622503210579836 AS DOUBLE PRECISION) AS sv_0, CAST(-1.679651877025506 AS DOUBLE PRECISION) AS sv_1, CAST(-1.480752546128632 AS DOUBLE PRECISION) AS sv_2, CAST(-1.258103558626763 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte) AS "Values"), 
"kernel_dp_CLASS_0" AS 
(SELECT t."KEY" AS "KEY", t.dot_product AS dot_product 
FROM (SELECT full_join_data_sv."KEY" AS "KEY", sum(CAST(full_join_data_sv.dot_prod1 AS DOUBLE PRECISION)) + CAST(0.955488189597331 AS DOUBLE PRECISION) AS dot_product 
FROM (SELECT kernel_input_with_scaling."KEY" AS "KEY", "SV_data_CLASS_0".dual_coeff * power(CAST(0.1 AS DOUBLE PRECISION) * (kernel_input_with_scaling."Feature_0" * "SV_data_CLASS_0".sv_0 + kernel_input_with_scaling."Feature_1" * "SV_data_CLASS_0".sv_1 + kernel_input_with_scaling."Feature_2" * "SV_data_CLASS_0".sv_2 + kernel_input_with_scaling."Feature_3" * "SV_data_CLASS_0".sv_3) + CAST(1.0 AS DOUBLE PRECISION), 3.0) AS dot_prod1 
FROM kernel_input_with_scaling, "SV_data_CLASS_0") AS full_join_data_sv GROUP BY full_join_data_sv."KEY") AS t), 
"OVR_Score_CLASS_0" AS 
(SELECT "kernel_dp_CLASS_0"."KEY" AS "KEY_CLASS_0", CAST(NULL AS DOUBLE PRECISION) AS "Proba_CLASS_0", "kernel_dp_CLASS_0".dot_product AS "Score_CLASS_0" 
FROM "kernel_dp_CLASS_0"), 
"SV_data_CLASS_1" AS 
(SELECT "Values".sv_idx AS sv_idx, "Values".dual_coeff AS dual_coeff, "Values".sv_0 AS sv_0, "Values".sv_1 AS sv_1, "Values".sv_2 AS sv_2, "Values".sv_3 AS sv_3 
FROM (SELECT 0 AS sv_idx, CAST(-0.699498531594568 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.900052801416273 AS DOUBLE PRECISION) AS sv_0, CAST(0.587594751130406 AS DOUBLE PRECISION) AS sv_1, CAST(-1.247945070811978 AS DOUBLE PRECISION) AS sv_2, CAST(-0.992072850194672 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 1 AS sv_idx, CAST(0.261610237786934 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.140869604470794 AS DOUBLE PRECISION) AS sv_0, CAST(-1.226202551394323 AS DOUBLE PRECISION) AS sv_1, CAST(0.381707256404597 AS DOUBLE PRECISION) AS sv_2, CAST(0.604111400397873 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 2 AS sv_idx, CAST(0.511537910178238 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.183622812329072 AS DOUBLE PRECISION) AS sv_0, CAST(-0.092579237316367 AS DOUBLE PRECISION) AS sv_1, CAST(0.556312862892087 AS DOUBLE PRECISION) AS sv_2, CAST(0.737126754613918 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 3 AS sv_idx, CAST(-0.073649616370604 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.622503210579836 AS DOUBLE PRECISION) AS sv_0, CAST(-1.679651877025506 AS DOUBLE PRECISION) AS sv_1, CAST(-1.480752546128632 AS DOUBLE PRECISION) AS sv_2, CAST(-1.258103558626763 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte) AS "Values"), 
"kernel_dp_CLASS_1" AS 
(SELECT t_1."KEY" AS "KEY", t_1.dot_product AS dot_product 
FROM (SELECT full_join_data_sv_1."KEY" AS "KEY", sum(CAST(full_join_data_sv_1.dot_prod1 AS DOUBLE PRECISION)) + CAST(0.477195991359971 AS DOUBLE PRECISION) AS dot_product 
FROM (SELECT kernel_input_with_scaling."KEY" AS "KEY", "SV_data_CLASS_1".dual_coeff * power(CAST(0.1 AS DOUBLE PRECISION) * (kernel_input_with_scaling."Feature_0" * "SV_data_CLASS_1".sv_0 + kernel_input_with_scaling."Feature_1" * "SV_data_CLASS_1".sv_1 + kernel_input_with_scaling."Feature_2" * "SV_data_CLASS_1".sv_2 + kernel_input_with_scaling."Feature_3" * "SV_data_CLASS_1".sv_3) + CAST(1.0 AS DOUBLE PRECISION), 3.0) AS dot_prod1 
FROM kernel_input_with_scaling, "SV_data_CLASS_1") AS full_join_data_sv_1 GROUP BY full_join_data_sv_1."KEY") AS t_1), 
"OVR_Score_CLASS_1" AS 
(SELECT "kernel_dp_CLASS_1"."KEY" AS "KEY_CLASS_1", CAST(NULL AS DOUBLE PRECISION) AS "Proba_CLASS_1", "kernel_dp_CLASS_1".dot_product AS "Score_CLASS_1" 
FROM "kernel_dp_CLASS_1"), 
"SV_data_CLASS_2" AS 
(SELECT "Values".sv_idx AS sv_idx, "Values".dual_coeff AS dual_coeff, "Values".sv_0 AS sv_0, "Values".sv_1 AS sv_1, "Values".sv_2 AS sv_2, "Values".sv_3 AS sv_3 
FROM (SELECT 0 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.183622812329072 AS DOUBLE PRECISION) AS sv_0, CAST(-0.319303900131958 AS DOUBLE PRECISION) AS sv_1, CAST(0.381707256404597 AS DOUBLE PRECISION) AS sv_2, CAST(0.338080691965782 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 1 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.146890024547156 AS DOUBLE PRECISION) AS sv_0, CAST(-0.54602856294755 AS DOUBLE PRECISION) AS sv_1, CAST(0.556312862892087 AS DOUBLE PRECISION) AS sv_2, CAST(0.205065337749737 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 2 AS sv_idx, CAST(0.986379186326755 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.785664819965375 AS DOUBLE PRECISION) AS sv_0, CAST(-0.092579237316367 AS DOUBLE PRECISION) AS sv_1, CAST(0.78912033820874 AS DOUBLE PRECISION) AS sv_2, CAST(1.003157463046009 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 3 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.304031213856332 AS DOUBLE PRECISION) AS sv_0, CAST(-0.092579237316367 AS DOUBLE PRECISION) AS sv_1, CAST(0.61451473172125 AS DOUBLE PRECISION) AS sv_2, CAST(0.737126754613918 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 4 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.29801079377997 AS DOUBLE PRECISION) AS sv_0, CAST(-0.092579237316367 AS DOUBLE PRECISION) AS sv_1, CAST(0.381707256404597 AS DOUBLE PRECISION) AS sv_2, CAST(0.338080691965782 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 5 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.544848016910854 AS DOUBLE PRECISION) AS sv_0, CAST(0.587594751130406 AS DOUBLE PRECISION) AS sv_1, CAST(0.498110994062923 AS DOUBLE PRECISION) AS sv_2, CAST(0.471096046181828 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 6 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-1.140869604470794 AS DOUBLE PRECISION) AS sv_0, CAST(-1.226202551394323 AS DOUBLE PRECISION) AS sv_1, CAST(0.381707256404597 AS DOUBLE PRECISION) AS sv_2, CAST(0.604111400397873 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 7 AS sv_idx, CAST(-0.380533759715087 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.418419195307231 AS DOUBLE PRECISION) AS sv_0, CAST(-1.679651877025506 AS DOUBLE PRECISION) AS sv_1, CAST(0.09069791225878 AS DOUBLE PRECISION) AS sv_2, CAST(0.072049983533691 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 8 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.785664819965375 AS DOUBLE PRECISION) AS sv_0, CAST(0.360870088314816 AS DOUBLE PRECISION) AS sv_1, CAST(0.730918469379577 AS DOUBLE PRECISION) AS sv_2, CAST(1.003157463046009 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 9 AS sv_idx, CAST(-0.569712312434706 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.544848016910854 AS DOUBLE PRECISION) AS sv_0, CAST(-1.679651877025506 AS DOUBLE PRECISION) AS sv_1, CAST(0.323505387575433 AS DOUBLE PRECISION) AS sv_2, CAST(0.072049983533691 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 10 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.544848016910854 AS DOUBLE PRECISION) AS sv_0, CAST(-0.77275322576314 AS DOUBLE PRECISION) AS sv_1, CAST(0.61451473172125 AS DOUBLE PRECISION) AS sv_2, CAST(0.737126754613918 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 11 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.063214410801812 AS DOUBLE PRECISION) AS sv_0, CAST(-0.092579237316367 AS DOUBLE PRECISION) AS sv_1, CAST(0.730918469379577 AS DOUBLE PRECISION) AS sv_2, CAST(0.737126754613918 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 12 AS sv_idx, CAST(-0.820720645472423 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.177602392252709 AS DOUBLE PRECISION) AS sv_0, CAST(-0.54602856294755 AS DOUBLE PRECISION) AS sv_1, CAST(0.381707256404597 AS DOUBLE PRECISION) AS sv_2, CAST(0.072049983533691 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 13 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.424439615383594 AS DOUBLE PRECISION) AS sv_0, CAST(-1.906376539841096 AS DOUBLE PRECISION) AS sv_1, CAST(0.381707256404597 AS DOUBLE PRECISION) AS sv_2, CAST(0.338080691965782 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 14 AS sv_idx, CAST(0.816924595336639 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.544848016910854 AS DOUBLE PRECISION) AS sv_0, CAST(-0.319303900131958 AS DOUBLE PRECISION) AS sv_1, CAST(1.021927813525394 AS DOUBLE PRECISION) AS sv_2, CAST(0.737126754613918 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 15 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.183622812329072 AS DOUBLE PRECISION) AS sv_0, CAST(-0.092579237316367 AS DOUBLE PRECISION) AS sv_1, CAST(0.556312862892087 AS DOUBLE PRECISION) AS sv_2, CAST(0.737126754613918 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 16 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.304031213856332 AS DOUBLE PRECISION) AS sv_0, CAST(-0.999477888578731 AS DOUBLE PRECISION) AS sv_1, CAST(1.021927813525394 AS DOUBLE PRECISION) AS sv_2, CAST(0.205065337749737 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 17 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.29801079377997 AS DOUBLE PRECISION) AS sv_0, CAST(-0.54602856294755 AS DOUBLE PRECISION) AS sv_1, CAST(0.61451473172125 AS DOUBLE PRECISION) AS sv_2, CAST(1.003157463046009 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 18 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.544848016910854 AS DOUBLE PRECISION) AS sv_0, CAST(-0.54602856294755 AS DOUBLE PRECISION) AS sv_1, CAST(0.730918469379577 AS DOUBLE PRECISION) AS sv_2, CAST(0.338080691965782 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 19 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.785664819965375 AS DOUBLE PRECISION) AS sv_0, CAST(-0.092579237316367 AS DOUBLE PRECISION) AS sv_1, CAST(0.96372594469623 AS DOUBLE PRECISION) AS sv_2, CAST(0.737126754613918 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 20 AS sv_idx, CAST(0.001323081004227 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.057193990725449 AS DOUBLE PRECISION) AS sv_0, CAST(-0.77275322576314 AS DOUBLE PRECISION) AS sv_1, CAST(0.730918469379577 AS DOUBLE PRECISION) AS sv_2, CAST(0.870142108829964 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 21 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.628523630656199 AS DOUBLE PRECISION) AS sv_0, CAST(-0.092579237316367 AS DOUBLE PRECISION) AS sv_1, CAST(1.138331551183721 AS DOUBLE PRECISION) AS sv_2, CAST(0.471096046181828 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 22 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.063214410801812 AS DOUBLE PRECISION) AS sv_0, CAST(0.360870088314816 AS DOUBLE PRECISION) AS sv_1, CAST(0.556312862892087 AS DOUBLE PRECISION) AS sv_2, CAST(0.737126754613918 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 23 AS sv_idx, CAST(-0.033660145045405 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.183622812329072 AS DOUBLE PRECISION) AS sv_0, CAST(0.814319413945998 AS DOUBLE PRECISION) AS sv_1, CAST(0.381707256404597 AS DOUBLE PRECISION) AS sv_2, CAST(0.471096046181828 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 24 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.026481623019896 AS DOUBLE PRECISION) AS sv_0, CAST(0.134145425499225 AS DOUBLE PRECISION) AS sv_1, CAST(0.498110994062923 AS DOUBLE PRECISION) AS sv_2, CAST(0.338080691965782 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 25 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.544848016910854 AS DOUBLE PRECISION) AS sv_0, CAST(-1.226202551394323 AS DOUBLE PRECISION) AS sv_1, CAST(0.61451473172125 AS DOUBLE PRECISION) AS sv_2, CAST(0.338080691965782 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 26 AS sv_idx, CAST(1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.183622812329072 AS DOUBLE PRECISION) AS sv_0, CAST(-1.906376539841096 AS DOUBLE PRECISION) AS sv_1, CAST(0.672716600550414 AS DOUBLE PRECISION) AS sv_2, CAST(0.338080691965782 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 27 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(0.304031213856332 AS DOUBLE PRECISION) AS sv_0, CAST(-0.319303900131958 AS DOUBLE PRECISION) AS sv_1, CAST(0.498110994062923 AS DOUBLE PRECISION) AS sv_2, CAST(0.205065337749737 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 28 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(-0.538827596834491 AS DOUBLE PRECISION) AS sv_0, CAST(-0.092579237316367 AS DOUBLE PRECISION) AS sv_1, CAST(0.381707256404597 AS DOUBLE PRECISION) AS sv_2, CAST(0.338080691965782 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 29 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.026481623019896 AS DOUBLE PRECISION) AS sv_0, CAST(-0.092579237316367 AS DOUBLE PRECISION) AS sv_1, CAST(0.672716600550414 AS DOUBLE PRECISION) AS sv_2, CAST(0.604111400397873 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte UNION ALL SELECT 30 AS sv_idx, CAST(-1.0 AS DOUBLE PRECISION) AS dual_coeff, CAST(1.267298426074418 AS DOUBLE PRECISION) AS sv_0, CAST(0.134145425499225 AS DOUBLE PRECISION) AS sv_1, CAST(0.61451473172125 AS DOUBLE PRECISION) AS sv_2, CAST(0.338080691965782 AS DOUBLE PRECISION) AS sv_3 
FROM dummy_cte) AS "Values"), 
"kernel_dp_CLASS_2" AS 
(SELECT t_2."KEY" AS "KEY", t_2.dot_product AS dot_product 
FROM (SELECT full_join_data_sv_2."KEY" AS "KEY", sum(CAST(full_join_data_sv_2.dot_prod1 AS DOUBLE PRECISION)) + CAST(-1.79332604680844 AS DOUBLE PRECISION) AS dot_product 
FROM (SELECT kernel_input_with_scaling."KEY" AS "KEY", "SV_data_CLASS_2".dual_coeff * power(CAST(0.1 AS DOUBLE PRECISION) * (kernel_input_with_scaling."Feature_0" * "SV_data_CLASS_2".sv_0 + kernel_input_with_scaling."Feature_1" * "SV_data_CLASS_2".sv_1 + kernel_input_with_scaling."Feature_2" * "SV_data_CLASS_2".sv_2 + kernel_input_with_scaling."Feature_3" * "SV_data_CLASS_2".sv_3) + CAST(1.0 AS DOUBLE PRECISION), 3.0) AS dot_prod1 
FROM kernel_input_with_scaling, "SV_data_CLASS_2") AS full_join_data_sv_2 GROUP BY full_join_data_sv_2."KEY") AS t_2), 
"OVR_Score_CLASS_2" AS 
(SELECT "kernel_dp_CLASS_2"."KEY" AS "KEY_CLASS_2", CAST(NULL AS DOUBLE PRECISION) AS "Proba_CLASS_2", "kernel_dp_CLASS_2".dot_product AS "Score_CLASS_2" 
FROM "kernel_dp_CLASS_2"), 
"OVR_Join_CTE" AS 
(SELECT "OVR_Score_CLASS_0"."KEY_CLASS_0" AS "KEY_CLASS_0", "OVR_Score_CLASS_0"."Proba_CLASS_0" AS "Proba_CLASS_0", "OVR_Score_CLASS_0"."Score_CLASS_0" AS "Score_CLASS_0", "OVR_Score_CLASS_1"."KEY_CLASS_1" AS "KEY_CLASS_1", "OVR_Score_CLASS_1"."Proba_CLASS_1" AS "Proba_CLASS_1", "OVR_Score_CLASS_1"."Score_CLASS_1" AS "Score_CLASS_1", "OVR_Score_CLASS_2"."KEY_CLASS_2" AS "KEY_CLASS_2", "OVR_Score_CLASS_2"."Proba_CLASS_2" AS "Proba_CLASS_2", "OVR_Score_CLASS_2"."Score_CLASS_2" AS "Score_CLASS_2" 
FROM "OVR_Score_CLASS_0" LEFT OUTER JOIN "OVR_Score_CLASS_1" ON "OVR_Score_CLASS_0"."KEY_CLASS_0" = "OVR_Score_CLASS_1"."KEY_CLASS_1" LEFT OUTER JOIN "OVR_Score_CLASS_2" ON "OVR_Score_CLASS_2"."KEY_CLASS_2" = "OVR_Score_CLASS_1"."KEY_CLASS_1"), 
orig_cte AS 
(SELECT "OVR_Join_CTE"."KEY_CLASS_0" AS "KEY", "OVR_Join_CTE"."Score_CLASS_0" AS "Score_CLASS_0", "OVR_Join_CTE"."Score_CLASS_1" AS "Score_CLASS_1", "OVR_Join_CTE"."Score_CLASS_2" AS "Score_CLASS_2", "OVR_Join_CTE"."Proba_CLASS_0" / ("OVR_Join_CTE"."Proba_CLASS_0" + "OVR_Join_CTE"."Proba_CLASS_1" + "OVR_Join_CTE"."Proba_CLASS_2") AS "Proba_CLASS_0", "OVR_Join_CTE"."Proba_CLASS_1" / ("OVR_Join_CTE"."Proba_CLASS_0" + "OVR_Join_CTE"."Proba_CLASS_1" + "OVR_Join_CTE"."Proba_CLASS_2") AS "Proba_CLASS_1", "OVR_Join_CTE"."Proba_CLASS_2" / ("OVR_Join_CTE"."Proba_CLASS_0" + "OVR_Join_CTE"."Proba_CLASS_1" + "OVR_Join_CTE"."Proba_CLASS_2") AS "Proba_CLASS_2", CAST(NULL AS DOUBLE PRECISION) AS "LogProba_CLASS_0", CAST(NULL AS DOUBLE PRECISION) AS "LogProba_CLASS_1", CAST(NULL AS DOUBLE PRECISION) AS "LogProba_CLASS_2", CAST(NULL AS BIGINT) AS "Decision", CAST(NULL AS DOUBLE PRECISION) AS "DecisionProba" 
FROM "OVR_Join_CTE"), 
score_class_union AS 
(SELECT scu."KEY_u" AS "KEY_u", scu."class" AS "class", scu."LogProba" AS "LogProba", scu."Proba" AS "Proba", scu."Score" AS "Score" 
FROM (SELECT orig_cte."KEY" AS "KEY_u", 'CLASS_0' AS "class", orig_cte."LogProba_CLASS_0" AS "LogProba", orig_cte."Proba_CLASS_0" AS "Proba", orig_cte."Score_CLASS_0" AS "Score" 
FROM orig_cte UNION ALL SELECT orig_cte."KEY" AS "KEY_u", 'CLASS_1' AS "class", orig_cte."LogProba_CLASS_1" AS "LogProba", orig_cte."Proba_CLASS_1" AS "Proba", orig_cte."Score_CLASS_1" AS "Score" 
FROM orig_cte UNION ALL SELECT orig_cte."KEY" AS "KEY_u", 'CLASS_2' AS "class", orig_cte."LogProba_CLASS_2" AS "LogProba", orig_cte."Proba_CLASS_2" AS "Proba", orig_cte."Score_CLASS_2" AS "Score" 
FROM orig_cte) AS scu), 
score_max AS 
(SELECT orig_cte."KEY" AS "KEY", orig_cte."Score_CLASS_0" AS "Score_CLASS_0", orig_cte."Score_CLASS_1" AS "Score_CLASS_1", orig_cte."Score_CLASS_2" AS "Score_CLASS_2", orig_cte."Proba_CLASS_0" AS "Proba_CLASS_0", orig_cte."Proba_CLASS_1" AS "Proba_CLASS_1", orig_cte."Proba_CLASS_2" AS "Proba_CLASS_2", orig_cte."LogProba_CLASS_0" AS "LogProba_CLASS_0", orig_cte."LogProba_CLASS_1" AS "LogProba_CLASS_1", orig_cte."LogProba_CLASS_2" AS "LogProba_CLASS_2", orig_cte."Decision" AS "Decision", orig_cte."DecisionProba" AS "DecisionProba", max_select."KEY_m" AS "KEY_m", max_select."max_Score" AS "max_Score" 
FROM orig_cte LEFT OUTER JOIN (SELECT score_class_union."KEY_u" AS "KEY_m", max(score_class_union."Score") AS "max_Score" 
FROM score_class_union GROUP BY score_class_union."KEY_u") AS max_select ON orig_cte."KEY" = max_select."KEY_m"), 
union_with_max AS 
(SELECT score_class_union."KEY_u" AS "KEY_u", score_class_union."class" AS "class", score_class_union."LogProba" AS "LogProba", score_class_union."Proba" AS "Proba", score_class_union."Score" AS "Score", score_max."KEY" AS "KEY", score_max."Score_CLASS_0" AS "Score_CLASS_0", score_max."Score_CLASS_1" AS "Score_CLASS_1", score_max."Score_CLASS_2" AS "Score_CLASS_2", score_max."Proba_CLASS_0" AS "Proba_CLASS_0", score_max."Proba_CLASS_1" AS "Proba_CLASS_1", score_max."Proba_CLASS_2" AS "Proba_CLASS_2", score_max."LogProba_CLASS_0" AS "LogProba_CLASS_0", score_max."LogProba_CLASS_1" AS "LogProba_CLASS_1", score_max."LogProba_CLASS_2" AS "LogProba_CLASS_2", score_max."Decision" AS "Decision", score_max."DecisionProba" AS "DecisionProba", score_max."KEY_m" AS "KEY_m", score_max."max_Score" AS "max_Score" 
FROM score_class_union LEFT OUTER JOIN score_max ON score_class_union."KEY_u" = score_max."KEY"), 
arg_max_cte AS 
(SELECT score_max."KEY" AS "KEY", score_max."Score_CLASS_0" AS "Score_CLASS_0", score_max."Score_CLASS_1" AS "Score_CLASS_1", score_max."Score_CLASS_2" AS "Score_CLASS_2", score_max."Proba_CLASS_0" AS "Proba_CLASS_0", score_max."Proba_CLASS_1" AS "Proba_CLASS_1", score_max."Proba_CLASS_2" AS "Proba_CLASS_2", score_max."LogProba_CLASS_0" AS "LogProba_CLASS_0", score_max."LogProba_CLASS_1" AS "LogProba_CLASS_1", score_max."LogProba_CLASS_2" AS "LogProba_CLASS_2", score_max."Decision" AS "Decision", score_max."DecisionProba" AS "DecisionProba", score_max."KEY_m" AS "KEY_m", score_max."max_Score" AS "max_Score", "arg_max_t_Score"."KEY_Score" AS "KEY_Score", "arg_max_t_Score"."arg_max_Score" AS "arg_max_Score" 
FROM score_max LEFT OUTER JOIN (SELECT union_with_max."KEY" AS "KEY_Score", max(union_with_max."class") AS "arg_max_Score" 
FROM union_with_max 
WHERE union_with_max."max_Score" <= union_with_max."Score" GROUP BY union_with_max."KEY") AS "arg_max_t_Score" ON score_max."KEY" = "arg_max_t_Score"."KEY_Score")
 SELECT arg_max_cte."KEY" AS "KEY", arg_max_cte."Score_CLASS_0" AS "Score_CLASS_0", arg_max_cte."Score_CLASS_1" AS "Score_CLASS_1", arg_max_cte."Score_CLASS_2" AS "Score_CLASS_2", arg_max_cte."Proba_CLASS_0" AS "Proba_CLASS_0", arg_max_cte."Proba_CLASS_1" AS "Proba_CLASS_1", arg_max_cte."Proba_CLASS_2" AS "Proba_CLASS_2", CASE WHEN (arg_max_cte."Proba_CLASS_0" IS NULL OR arg_max_cte."Proba_CLASS_0" > CAST(0.0 AS DOUBLE PRECISION)) THEN ln(arg_max_cte."Proba_CLASS_0") ELSE -1.79769313486231e+308 END AS "LogProba_CLASS_0", CASE WHEN (arg_max_cte."Proba_CLASS_1" IS NULL OR arg_max_cte."Proba_CLASS_1" > CAST(0.0 AS DOUBLE PRECISION)) THEN ln(arg_max_cte."Proba_CLASS_1") ELSE -1.79769313486231e+308 END AS "LogProba_CLASS_1", CASE WHEN (arg_max_cte."Proba_CLASS_2" IS NULL OR arg_max_cte."Proba_CLASS_2" > CAST(0.0 AS DOUBLE PRECISION)) THEN ln(arg_max_cte."Proba_CLASS_2") ELSE -1.79769313486231e+308 END AS "LogProba_CLASS_2", arg_max_cte."arg_max_Score" AS "Decision", CASE WHEN (arg_max_cte."arg_max_Score" = 'CLASS_0') THEN arg_max_cte."Proba_CLASS_0" WHEN (arg_max_cte."arg_max_Score" = 'CLASS_1') THEN arg_max_cte."Proba_CLASS_1" WHEN (arg_max_cte."arg_max_Score" = 'CLASS_2') THEN arg_max_cte."Proba_CLASS_2" END AS "DecisionProba" 
FROM arg_max_cte